/**
 * Shared type definitions for the entire application
 * Defines common data structures used across modules
 */

/**
 * Stock data point with date information
 */
export type StockDataPoint = {
	date: string;
	open: number;
	high: number;
	low: number;
	close: number;
	volume: number;
	adjClose: number;
};

/**
 * Normalized stock data with numeric timestamp
 */
export type NormalizedStockData = {
	timestamp: number;
	price: number;
	volume: number;
	high: number;
	low: number;
};

/**
 * Trading signal generated by prediction engine
 */
export type TradingSignal = {
	action: 'BUY' | 'SELL' | 'HOLD';
	confidence: number;
	delta: number;
	reason: string;
};

/**
 * Model training result with performance metrics
 */
export type TrainingResult = {
	loss: number;
	accuracy: number;
	meanAbsoluteError: number;
	rootMeanSquaredError: number;
	epochs: number;
	trainingTime: number;
	isValid: boolean;
};

/**
 * Model performance metrics
 */
export type ModelPerformance = {
	loss: number;
	accuracy: number;
	meanAbsoluteError: number;
	rootMeanSquaredError: number;
	isValid: boolean;
	lastTrained: Date;
	dataPoints: number;
	version: string;
};

/**
 * Prediction result for a stock symbol
 */
export type PredictionResult = {
	currentPrice: number;
	predictedPrices: number[];
	confidence: number;
	meanAbsoluteError: number;
};

/**
 * Report prediction data
 */
export type ReportPrediction = {
	symbol: string;
	name: string;
	prediction: PredictionResult;
	signal: 'BUY' | 'SELL' | 'HOLD';
	confidence: number;
};

/**
 * Chart data point for visualization
 */
export type ChartDataPoint = {
	date: string;
	price: number;
	predicted?: number;
	volume?: number;
};

/**
 * Report generation context
 */
export type ReportContext = {
	title: string;
	generatedAt: string;
	totalSymbols: number;
	predictedSymbols: number;
	buySignals: number;
	sellSignals: number;
	holdSignals: number;
	averageConfidence: number;
};

/**
 * Progress tracking status
 */
export type ProgressStatus =
	| 'pending'
	| 'updated'
	| 'up-to-date'
	| 'error'
	| 'trained'
	| 'no-new-data'
	| 'poor-performance'
	| 'retrained'
	| 'no-improvement'
	| 'predicted';

/**
 * ML configuration
 */
export type MlConfig = {
	modelType: 'lstm' | 'regression';
	windowSize: number;
	epochs: number;
	learningRate: number;
	batchSize: number;
};

/**
 * Trading configuration
 */
export type TradingConfig = {
	buyThreshold: number;
	sellThreshold: number;
	minConfidence: number;
};

/**
 * API configuration
 */
export type ApiConfig = {
	timeout: number;
	retries: number;
	rateLimit: number;
};

/**
 * Database configuration
 */
export type DatabaseConfig = {
	type: 'json' | 'sqlite';
	path: string;
	modelsPath: string;
};

/**
 * Output configuration
 */
export type OutputConfig = {
	directory: string;
	template: string;
	includeCharts: boolean;
	chartsType: 'line' | 'candlestick' | 'both';
};

/**
 * Error context for error handling
 */
export type ErrorContext = {
	operation: string;
	symbol?: string;
	step?: string;
	additionalInfo?: Record<string, unknown>;
};
